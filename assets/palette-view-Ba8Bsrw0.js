import{j as e,N as E,f as T,h as y,T as d,G as L,F as C,i as N,k as w,l as j,m as A,n as I,L as P}from"./mantine-8JTekVFe.js";import{l as f,j as S,r as H}from"./react-BFtFWddK.js";import{u as g,R as M,s as k,r as x,E as R,M as D,a as B,b as G,c as O}from"./index-CkFhHJ_k.js";import{u as v}from"./use-translated-name-BhARIcv6.js";import{u as z}from"./use-palette-C3aMtfmv.js";import{c as p}from"./palette-card.module-BXpITapC.js";function F(){const{t:s,i18n:o}=f(),{translateName:n}=v(),r=S(),{countryList:l,selectedCountry:i}=g(t=>t.app),c=[{label:s("Please select..."),value:"",disabled:!0},...l.filter(t=>t.id!=="UN").map(t=>[t.id,n(t.name)]).sort((t,m)=>t[1].localeCompare(m[1],o.languages[0])).map(([t,m])=>({label:m,value:t}))],u=()=>{x.openApp({appId:"rmg-palette-upload"}),x.event(R.ADD_CITY,{})};return e.jsxs(M,{children:[e.jsx(E,{label:s("Country/Region"),value:i,onChange:({currentTarget:{value:t}})=>r(k(t)),data:c}),e.jsx(T,{variant:"filled",ml:"auto",onClick:u,children:s("Add a city")})]})}const U="_root_180oh_1",V="_control_180oh_8",b={root:U,control:V,"official-names":"_official-names_180oh_15"},Y=s=>{var l;const[,o,n,r]=(l=s.match(/^#(\w{2})(\w{2})(\w{2})$/))!=null?l:[];return[+("0x"+o),+("0x"+n),+("0x"+r)]};function $({line:s}){const{t:o}=f(),{translateName:n,otherOfficialNames:r}=v(),{countryList:l,selectedCountry:i}=g(t=>t.app),c=l.find(({id:t})=>t===i),u=s.fg===D.black?"black":"white";return e.jsxs(y,{className:p.card,withBorder:!0,children:[e.jsxs(y.Section,{bg:s.colour,className:p["card-section"],style:{color:u},children:[e.jsx(d,{span:!0,children:n(s.name)}),e.jsx(d,{span:!0,children:r(s.name,c==null?void 0:c.languages)})]}),e.jsxs(L,{gap:"xs",mt:"sm",children:[e.jsxs(C,{className:p.output,children:[e.jsx(d,{c:"dimmed",size:"sm",span:!0,children:o("HEX")}),e.jsx(N,{children:s.colour.toUpperCase()})]}),e.jsxs(C,{className:p.output,children:[e.jsx(d,{c:"dimmed",size:"sm",span:!0,children:o("RGB")}),e.jsx(N,{children:Y(s.colour).join(", ")})]}),s.pantone&&e.jsxs(C,{className:p.output,children:[e.jsx(d,{c:"dimmed",size:"sm",span:!0,children:o("PantoneÂ® code")}),e.jsx(N,{children:s.pantone})]})]})]},s.id)}function X({cityCode:s}){const o=z(s);return e.jsx(w,{cols:{base:1,xs:2,sm:3,md:4,lg:5,xl:6},children:o.map(n=>e.jsx($,{line:n},n.id))})}function q(){const{t:s}=f(),{translateName:o,otherOfficialNames:n}=v(),{cityList:r,countryList:l,selectedCountry:i}=g(a=>a.app),c=l.find(({id:a})=>a===i),u=r.filter(a=>a.country===i),t=H.useRef({}),m=a=>{a&&setTimeout(()=>{var h;(h=t.current[a])==null||h.scrollIntoView({behavior:"smooth"})},200)},_=async a=>{x.closeApp("rmg-palette-upload"),setTimeout(()=>{x.openApp({appId:"rmg-palette-upload",hash:"/new?city="+a})},200),x.event(R.EDIT_CITY,{city:a})};return e.jsx(j,{chevronPosition:"left",classNames:{root:b.root},onChange:m,children:u.map(a=>(t.current={},e.jsxs(j.Item,{ref:h=>{t.current[a.id]=h},value:a.id,children:[e.jsxs(A,{className:b.control,children:[e.jsxs(j.Control,{children:[o(a.name),e.jsx(d,{span:!0,className:b["official-names"],children:n(a.name,c==null?void 0:c.languages)})]}),e.jsx(I,{variant:"default",ml:"xs",mr:"md","aria-label":s("Edit"),title:s("Edit"),onClick:()=>_(a.id),children:e.jsx(B,{})})]}),e.jsx(j.Panel,{children:e.jsx(X,{cityCode:a.id})})]},a.id)))})}function se(){const{t:s}=f(),{isDataLoading:o,selectedCountry:n}=g(r=>r.app);return e.jsxs(G,{children:[e.jsx(P,{visible:o}),e.jsx(F,{}),e.jsxs(O,{children:[e.jsx(P,{visible:!n,loaderProps:{children:s("Select a country or region to begin.")}}),e.jsx(q,{})]})]})}export{se as default};
