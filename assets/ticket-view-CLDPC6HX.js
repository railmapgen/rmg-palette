import{j as t,n as Te,F as te,G as C,o as _e,p as F,i as L,q as ve,s as $e,t as je,u as re,v as oe,T as z,w as T,N as se,x as ze,C as he,f as R,y as Ae,z as Fe,M as Ie,D as Pe,E as Xe,H as Ve,B as v,I as x,J as Me,K as Se,O as Ue,P as ne,Q as Ye,U as Ce,V as X,W as qe,r as N,X as Be,Y as He,Z as Je,l as Ge,k as Qe,L as Ke,m as Ze,_ as et,$ as tt}from"./mantine-CrXTPvn8.js";import{l as P,r as g}from"./react-ZLv5tWbY.js";import{L as ae,a as I,u as k,b as me,c as fe,d as nt,r as at,e as rt,f as ot,g as st,h as it,i as ct,j as lt,k as ut,l as dt,p as ht,m as mt,M as Q,n as ft,o as gt,q as pt,t as bt,v as yt,w as wt,x as xt,y as vt,z as jt,I as K,D as ke,G as Pt,A as Z,B as W,C as q,F as De,E as Mt}from"./index-CwBgZi1W.js";import{u as _}from"./use-translated-name-CiDU2zOs.js";import{C as St,P as Ct,a as kt}from"./compatible-colour-input-iRWq0gFh.js";import{c as ee}from"./palette-card.module-BXpITapC.js";const Dt="_row_1uk92_1",Et={row:Dt},Wt=e=>{const{onUpdate:a,onLangSwitch:n,onRemove:r}=e,o=e.entries??[],{t:u}=P(),{translateName:l}=_(),c=Object.entries(ae).map(([i,m])=>({value:i,label:l(m),disabled:o.some(s=>s[0]===i)})),h=()=>{const i=Object.keys(ae).filter(m=>!o.find(s=>s[0]===m))[0];a(i,"")};return t.jsx(Te,{legend:u("Multi-languages"),children:o.map(([i,m],s,d)=>t.jsxs(te,{pt:4,align:"center","data-testid":"entry-card-stack-"+i,children:[t.jsxs(C,{gap:"xs",flex:1,grow:!0,children:[t.jsx(_e,{size:"xs","aria-label":u("Language"),value:i,onChange:f=>n(i,f),data:c,searchable:!0}),t.jsx(F,{size:"xs","aria-label":u("Name"),placeholder:u("Enter name"),value:m,onChange:({currentTarget:{value:f}})=>a(i,f)})]}),t.jsxs(te,{ml:8,wrap:"nowrap",children:[s===d.length-1?t.jsx(L,{size:"sm",variant:"filled","aria-label":u("Add a name in another language"),title:u("Add a name in another language"),onClick:h,children:t.jsx(ve,{})}):t.jsx($e,{w:22}),d.length>1&&t.jsx(L,{size:"sm",variant:"outline","aria-label":u("Remove this name"),title:u("Remove this name"),onClick:()=>r(i),ml:4,children:t.jsx(je,{})})]})]},s))})};function ie(e){return t.jsx(Wt,{...e})}function Lt(){const{t:e,i18n:a}=P(),{translateName:n}=_(),r=I(),{countryList:o}=k(s=>s.app),{country:u,newCountry:l,countryName:c,newCountryLangs:h}=k(s=>s.ticket);g.useEffect(()=>{if(u&&u!=="new"){const s=o.find(d=>d.id===u);s&&(r(me(u)),r(fe(s.languages)))}},[u]);const i=[{value:"",label:e("Please select..."),disabled:!0},...o.filter(s=>s.id!=="UN").map(s=>({value:s.id,label:n(s.name)})).toSorted((s,d)=>s.label.localeCompare(d.label,a.languages[0])),{value:"new",label:e("Add a country/region...")}],m=Object.entries(ae).map(([s,d])=>({value:s,label:n(d)}));return t.jsxs(re,{children:[t.jsx(oe,{children:t.jsx(z,{order:2,size:"h4",children:e("Country/Region")})}),t.jsxs(T,{py:4,gap:"xs",children:[t.jsxs(C,{className:Et.row,children:[t.jsx(se,{label:e("Country/Region"),value:u,onChange:({currentTarget:{value:s}})=>r(nt(s)),data:i}),t.jsx(F,{label:e("Country/region code"),placeholder:"e.g. CN, HK, JP (ISO 3166-1 alpha-2)",value:l,onChange:({currentTarget:{value:s}})=>r(me(s)),error:l&&!l.match(/^[A-Z]{2}$|^GB[A-Z]{3}$/)?e("Country code should be in the format of ISO 3166-1 alpha-2"):void 0,disabled:u!=="new"}),t.jsx(ze,{label:e("Official language"),value:h,onChange:s=>r(fe(s)),data:m,searchable:!0,disabled:u!=="new"})]}),u==="new"&&t.jsx(ie,{entries:c,onUpdate:(s,d)=>r(ot({lang:s,name:d})),onLangSwitch:(s,d)=>r(rt({prevLang:s,nextLang:d})),onRemove:s=>r(at(s))})]})]})}function Nt(){const{t:e,i18n:a}=P(),n=I(),{translateName:r}=_(),{cityList:o}=k(s=>s.app),{country:u,city:l,newCity:c,cityName:h}=k(s=>s.ticket),i=[{value:"",label:e("Please select..."),disabled:!0},...o.filter(s=>s.country===u).map(s=>({value:s.id,label:r(s.name)})).toSorted((s,d)=>s.label.localeCompare(d.label,a.languages[0])),{value:"new",label:e("Add a city")+"..."}],m=async s=>{if(s==="new"){n(ut("new"));return}const d=await dt(s,o);n(d?ht(d):mt())};return t.jsxs(re,{children:[t.jsx(oe,{children:t.jsx(z,{order:2,size:"h4",children:e("City")})}),t.jsxs(T,{py:4,gap:"xs",children:[t.jsxs(C,{align:"flex-start",grow:!0,children:[t.jsx(se,{label:e("City"),value:l,onChange:({currentTarget:{value:s}})=>m(s),data:i}),l==="new"&&t.jsx(F,{label:e("City code"),placeholder:"e.g. hongkong, guangzhou, shanghai",value:c,onChange:({currentTarget:{value:s}})=>n(st(s)),error:c&&c.match(/[^a-z]/)?"City code should contain lower case letters only":void 0})]}),l==="new"&&t.jsx(ie,{entries:h,onUpdate:(s,d)=>n(lt({lang:s,name:d})),onLangSwitch:(s,d)=>n(ct({prevLang:s,nextLang:d})),onRemove:s=>n(it(s))})]})]})}function Ot({lineDetail:e,onUpdate:a,onMoveUp:n,onMoveDown:r,onCopy:o,onRemove:u,onNameUpdate:l,onNameRemove:c,onLangSwitch:h}){const{t:i}=P(),{translateName:m}=_(),{pantoneReady:s}=k(p=>p.app),[d,f]=g.useState(!!e.pantone),[b,M]=g.useState(!1),$=g.useRef(null),A=()=>{b?M(!1):(M(!0),setTimeout(()=>{$.current?.scrollIntoView({behavior:"smooth"})},0))},H=[{label:i("Black"),value:Q.black},{label:i("White"),value:Q.white}],S=e.fg===Q.black?"black":"white";return t.jsxs(he,{ref:$,className:ee.editable,withBorder:!0,children:[t.jsxs(he.Section,{bg:e.colour,className:ee["card-section"],children:[t.jsx(R,{span:!0,style:{color:S},children:m(Object.fromEntries(e.nameEntity))}),t.jsxs(C,{gap:"xs",ml:"auto",children:[t.jsx(L,{size:"xs",variant:"subtle",color:S,"aria-label":i("Move up"),title:i("Move up"),onClick:n,children:t.jsx(Ae,{})}),t.jsx(L,{size:"xs",variant:"subtle",color:S,"aria-label":i("Move down"),title:i("Move down"),onClick:r,children:t.jsx(Fe,{})}),t.jsx(L,{size:"xs",variant:"subtle",color:S,"aria-label":i("Edit"),title:i("Edit"),onClick:A,children:t.jsx(Ie,{})}),t.jsx(L,{size:"xs",variant:"subtle",color:S,"aria-label":i("Duplicate"),title:i("Duplicate"),onClick:o,children:t.jsx(Pe,{})}),t.jsx(L,{size:"xs",variant:"subtle",color:S,"aria-label":i("Remove"),title:i("Remove"),onClick:u,children:t.jsx(je,{})})]})]}),b&&t.jsxs(T,{gap:"xs",mt:"xs",children:[t.jsxs(C,{gap:"xs",className:ee["editable-group"],children:[t.jsx(F,{label:i("Line code"),placeholder:"e.g. twl, gz1, sh1",value:e.id,onChange:({currentTarget:{value:p}})=>a?.({id:p}),error:e.id?.match(/[^a-z0-9]/)?i("Line code should be alphanumeric"):void 0}),t.jsx(St,{label:i("Background colour"),value:e.colour,onChange:p=>a?.({colour:p}),disabled:s&&d}),s&&t.jsx(Xe,{label:i("Use Pantone®"),checked:d,onChange:({currentTarget:{checked:p}})=>f(p),mt:"xl"}),s&&d&&t.jsx(Ct,{value:e.pantone??"",onChange:(p,j)=>a?.({pantone:p,colour:j})}),t.jsx(Ve,{size:"sm",label:i("Foreground colour"),data:H,value:e.fg,onChange:p=>a?.({fg:p})})]}),t.jsx(ie,{entries:e.nameEntity,onUpdate:(p,j)=>l?.(p,j),onLangSwitch:(p,j)=>h?.(p,j),onRemove:p=>c?.(p)})]})]})}function Rt(){const{t:e}=P(),a=I(),n=k(c=>c.ticket.lines),r=g.useRef(null),o=g.useCallback(()=>{setTimeout(()=>{r.current?.lastElementChild?.scrollIntoView({behavior:"smooth"})},0)},[r.current]),u=c=>{a(vt(c)),o()},l=()=>{a(jt()),o()};return t.jsxs(re,{children:[t.jsxs(oe,{children:[t.jsx(z,{order:2,size:"h4",children:e("Lines")}),t.jsx(kt,{ml:"auto"})]}),t.jsxs(T,{ref:r,py:4,gap:"xs",children:[Object.entries(n).map(([c,h])=>t.jsx(Ot,{lineDetail:h,onUpdate:i=>a(xt({entryId:c,updates:i})),onMoveUp:()=>a(wt(c)),onMoveDown:()=>a(yt(c)),onCopy:()=>u(c),onRemove:()=>a(bt(c)),onNameUpdate:(i,m)=>a(pt({entryId:c,lang:i,name:m})),onLangSwitch:(i,m)=>a(gt({entryId:c,prevLang:i,nextLang:m})),onNameRemove:i=>a(ft({entryId:c,lang:i}))},c)),t.jsx(v,{size:"xs",variant:"outline",leftSection:t.jsx(ve,{}),ml:"auto",onClick:l,children:e("Add a line")})]})]})}const Tt="_content_euz2o_1",_t="_body_euz2o_7",O={content:Tt,body:_t,"stepper-root":"_stepper-root_euz2o_14","stepper-content":"_stepper-content_euz2o_21","step-body":"_step-body_euz2o_28"};function $t(e){const{countryErrors:a,cityErrors:n,lineErrors:r,onIgnore:o,onClose:u}=e,{t:l}=P(),{translateName:c}=_();return t.jsxs(t.Fragment,{children:[t.jsxs(T,{gap:"xs",className:O["step-body"],children:[t.jsx(R,{children:l("Your inputs contain the following errors. Please consider fixing it before submitting.")}),a.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(z,{order:3,size:"h5",children:l("Country/Region")}),t.jsx(x,{size:"sm",withPadding:!0,"aria-label":"List of country errors",children:a.map((h,i)=>t.jsx(x.Item,{children:c(K[h])},i))})]}),n.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(z,{order:3,size:"h5",children:l("City")}),t.jsx(x,{size:"sm",withPadding:!0,"aria-label":"List of city errors",children:n.map((h,i)=>t.jsx(x.Item,{children:c(K[h])},i))})]}),Object.values(r).flat().length>0&&t.jsxs(t.Fragment,{children:[t.jsx(z,{order:3,size:"h5",children:l("Lines")}),t.jsx(x,{size:"sm",withPadding:!0,"aria-label":"List of line errors",children:Object.entries(r).map(([h,i])=>t.jsxs(x.Item,{children:[h,t.jsx(x,{size:"sm",withPadding:!0,children:i.map((m,s)=>t.jsx(x.Item,{children:c(K[m])},s))})]},h))})]})]}),t.jsxs(C,{gap:"sm",pt:"xs",children:[t.jsx(v,{variant:"default",ml:"auto",onClick:u,children:l("Go back")}),t.jsx(v,{onClick:o,children:l("Submit anyway")})]})]})}const ge=e=>!!e.match(/^https?:\/\//)?.[0];function zt(e){const{dataSource:a,onDataSourceChange:n,refLink:r,onRefLinkChange:o,justification:u,onJustificationChange:l,onPrev:c,onNext:h}=e,{t:i}=P(),{translateName:m}=_(),s=[{value:"",label:i("Please select..."),disabled:!0},...Object.entries(ke).map(([f,b])=>({value:f,label:m(b)}))],d=!a||!r||!u||!ge(r);return t.jsxs(t.Fragment,{children:[t.jsxs(T,{gap:"xs",className:O["step-body"],children:[t.jsx(R,{children:i("Please provide suitable source and justification.")}),t.jsx(se,{label:i("Data source"),value:a,onChange:({currentTarget:{value:f}})=>n(f),data:s}),t.jsx(F,{label:i("Reference link"),placeholder:i("Enter a valid URL, e.g.")+" https://en.wikipedia.org",value:r,onChange:({currentTarget:{value:f}})=>o(f),error:r&&!ge(r)?i("URL is invalid"):void 0}),t.jsx(Me,{label:i("Justification"),placeholder:i("Briefly describe your changes and provide justification"),value:u,onChange:({currentTarget:{value:f}})=>l(f),autosize:!0,minRows:3})]}),t.jsxs(C,{gap:"sm",pt:"xs",children:[c&&t.jsx(v,{variant:"default",onClick:c,leftSection:t.jsx(Se,{}),children:i("Previous")}),t.jsx(v,{ml:"auto",onClick:h,rightSection:t.jsx(Ue,{}),disabled:d,children:i("Next")})]})]})}function At(e){const{countryEntry:a,cityEntry:n,paletteList:r,dataSource:o,refLink:u,justification:l,onPrev:c}=e,{t:h}=P(),{translateName:i}=_(),m=g.useRef(null),s=[`**Data source:** ${o?i(ke[o]):"(REPLACE ME)"}`,`**Reference link:** ${u||"(REPLACE ME)"}`,`**Justification:** ${l||"(REPLACE ME)"}`,Pt,Z("country",a),Z("city",n),Z("lines",r)].join(`

`),d=new URLSearchParams({template:"new-palettes-request.md",labels:"resources",title:"Resources: New palettes of "+n?.name?.en,body:s}),f=new URLSearchParams({template:"new-palettes-request.md",labels:"resources",title:"Resources: New palettes of "+n?.name?.en}),b=async()=>{m?.current&&(m.current.select(),await navigator.clipboard.writeText(s))};return t.jsxs(t.Fragment,{children:[t.jsxs(T,{gap:"xs",className:O["step-body"],children:[t.jsx(R,{children:h("If the button below doesn't work for you, please follow the instructions below:")}),t.jsxs(x,{type:"ordered",withPadding:!0,children:[t.jsxs(x.Item,{children:[h("Open")," ",t.jsxs(ne,{href:"https://github.com/railmapgen/rmg-palette/issues/new?"+f.toString(),target:"_blank",children:["Issue: New Palettes Request ",t.jsx(Ye,{})]})]}),t.jsxs(x.Item,{children:[h("Paste following text to the issue body")," ",t.jsx(v,{size:"xs",variant:"light",leftSection:t.jsx(Pe,{}),onClick:b,children:h("Copy")}),t.jsx(Me,{ref:m,readOnly:!0,defaultValue:s,onClick:({target:M})=>M.select(),mt:"xs",autosize:!0,maxRows:3})]})]})]}),t.jsxs(C,{gap:"sm",pt:"xs",children:[t.jsx(v,{variant:"default",onClick:c,leftSection:t.jsx(Se,{}),children:h("Previous")}),t.jsx(v,{ml:"auto",onClick:()=>window.open("https://github.com/railmapgen/rmg-palette/issues/new?"+d.toString(),"_blank"),children:h("1-click open issue")})]})]})}function Ft(e){const{isOpen:a,onClose:n}=e,{t:r}=P(),[o,u]=g.useState([]),[l,c]=g.useState([]),[h,i]=g.useState({}),[m,s]=g.useState(""),[d,f]=g.useState(""),[b,M]=g.useState(""),[$,A]=g.useState(!1),[H,S]=g.useState(!1),{countryList:p}=k(G=>G.app),j=k(G=>G.ticket),We=W.getCountryEntry(j),Le=W.getCityEntry(j),Ne=W.getPalettes(j);g.useEffect(()=>{a?(u(W.getCountryErrors(j)),c(W.getCityErrors(j,p)),i(W.getLineErrors(j,p))):(A(!1),s(""),f(""),M(""),S(!1))},[a]);const ue=o.length>0||l.length>0||Object.values(h).flat().length>0,J=ue&&!$,de=!J&&!H,Oe=()=>J?0:de?1:2,Re=()=>{!J&&!de&&N.storage.remove(q),n()};return t.jsx(Ce,{classNames:{content:O.content,body:O.body},opened:a,onClose:Re,title:r("Submit palettes"),children:t.jsxs(X,{active:Oe(),classNames:{root:O["stepper-root"],content:O["stepper-content"]},children:[t.jsx(X.Step,{label:r("Validate"),color:$?"orange":void 0,completedIcon:$?t.jsx(qe,{size:24}):void 0,children:t.jsx($t,{countryErrors:o,cityErrors:l,lineErrors:h,onIgnore:()=>A(!0),onClose:n})}),t.jsx(X.Step,{label:r("Justify"),children:t.jsx(zt,{dataSource:m,onDataSourceChange:s,refLink:d,onRefLinkChange:f,justification:b,onJustificationChange:M,onPrev:ue?()=>A(!1):void 0,onNext:()=>S(!0)})}),t.jsx(X.Step,{label:r("Submit"),children:t.jsx(At,{countryEntry:We,cityEntry:Le,paletteList:Ne,dataSource:m,refLink:d,justification:b,onPrev:()=>S(!1)})})]})})}function It(e){const{isOpen:a,onClose:n,incomingState:r}=e,{t:o}=P(),u=I(),l=()=>{N.storage.remove(q),n()},c=()=>{r&&u(De(r)),n()};return t.jsx(Ce,{opened:a,onClose:n,title:o("Unsaved draft"),children:t.jsxs(te,{direction:"column",children:[t.jsx(R,{children:o("Do you want to continue with your last unsaved ticket?")}),t.jsxs(C,{gap:"xs",mt:"xs",children:[t.jsx(v,{variant:"default",ml:"auto",onClick:l,children:o("Discard")}),t.jsx(v,{onClick:c,children:o("Continue")})]})]})})}const Xt="_alert_1kqcm_1",Vt="_created_1kqcm_13",V={alert:Xt,"item-wrapper":"_item-wrapper_1kqcm_5","item-label":"_item-label_1kqcm_9",created:Vt},Ut="https://api.github.com/repos/railmapgen",Yt=async(e,...a)=>{const n=[];let r=0;for(;++r;){const o=await e(r,...a);if(n.push(...o),o.length<100)break}return n},qt=async e=>{const a=`${Ut}/rmg-palette/issues`,n=new URLSearchParams({labels:"resources",state:"open",per_page:"100",page:e.toString()});return await(await fetch(a+"?"+n.toString())).json()},Bt=async()=>(await Yt(qt)).filter(a=>!a.labels.some(n=>["hold","need fixing"].includes(n.name))).filter(a=>!a.body?.includes("REPLACE ME")).sort((a,n)=>a.number-n.number),Ht=Be(Bt),U=43200,pe=1440,be=Symbol.for("constructDateFrom");function ce(e,a){return typeof e=="function"?e(a):e&&typeof e=="object"&&be in e?e[be](a):e instanceof Date?new e.constructor(a):new Date(a)}function E(e,a){return ce(a||e,e)}let Jt={};function Ee(){return Jt}function ye(e,a){const n=Ee(),r=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=E(e,a?.in),u=o.getDay(),l=(u<r?7:0)+u-r;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function we(e){const a=E(e),n=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return n.setUTCFullYear(a.getFullYear()),+e-+n}function B(e,...a){const n=ce.bind(null,e||a.find(r=>typeof r=="object"));return a.map(n)}function Y(e,a){const n=+E(e)-+E(a);return n<0?-1:n>0?1:n}function Gt(e){return ce(e,Date.now())}function Qt(e,a,n){const[r,o]=B(n?.in,e,a),u=r.getFullYear()-o.getFullYear(),l=r.getMonth()-o.getMonth();return u*12+l}function Kt(e){return a=>{const r=(e?Math[e]:Math.trunc)(a);return r===0?0:r}}function Zt(e,a){return+E(e)-+E(a)}function en(e,a){const n=E(e,a?.in);return n.setHours(23,59,59,999),n}function tn(e,a){const n=E(e,a?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function nn(e,a){const n=E(e,a?.in);return+en(n,a)==+tn(n,a)}function an(e,a,n){const[r,o,u]=B(n?.in,e,e,a),l=Y(o,u),c=Math.abs(Qt(o,u));if(c<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*c);let h=Y(o,u)===-l;nn(r)&&c===1&&Y(r,u)===1&&(h=!1);const i=l*(c-+h);return i===0?0:i}function rn(e,a,n){const r=Zt(e,a)/1e3;return Kt(n?.roundingMethod)(r)}const on={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sn=(e,a,n)=>{let r;const o=on[e];return typeof o=="string"?r=o:a===1?r=o.one:r=o.other.replace("{{count}}",a.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function D(e){return(a={})=>{const n=a.width?String(a.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const cn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ln={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},un={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dn={date:D({formats:cn,defaultWidth:"full"}),time:D({formats:ln,defaultWidth:"full"}),dateTime:D({formats:un,defaultWidth:"full"})},hn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mn=(e,a,n,r)=>hn[e];function y(e){return(a,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,c=n?.width?String(n.width):l;o=e.formattingValues[c]||e.formattingValues[l]}else{const l=e.defaultWidth,c=n?.width?String(n.width):e.defaultWidth;o=e.values[c]||e.values[l]}const u=e.argumentCallback?e.argumentCallback(a):a;return o[u]}}const fn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xn=(e,a)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vn={ordinalNumber:xn,era:y({values:fn,defaultWidth:"wide"}),quarter:y({values:gn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:y({values:pn,defaultWidth:"wide"}),day:y({values:bn,defaultWidth:"wide"}),dayPeriod:y({values:yn,defaultWidth:"wide",formattingValues:wn,defaultFormattingWidth:"wide"})};function w(e){return(a,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],u=a.match(o);if(!u)return null;const l=u[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(c)?Pn(c,s=>s.test(l)):jn(c,s=>s.test(l));let i;i=e.valueCallback?e.valueCallback(h):h,i=n.valueCallback?n.valueCallback(i):i;const m=a.slice(l.length);return{value:i,rest:m}}}function jn(e,a){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&a(e[n]))return n}function Pn(e,a){for(let n=0;n<e.length;n++)if(a(e[n]))return n}function le(e){return(a,n={})=>{const r=a.match(e.matchPattern);if(!r)return null;const o=r[0],u=a.match(e.parsePattern);if(!u)return null;let l=e.valueCallback?e.valueCallback(u[0]):u[0];l=n.valueCallback?n.valueCallback(l):l;const c=a.slice(o.length);return{value:l,rest:c}}}const Mn=/^(\d+)(th|st|nd|rd)?/i,Sn=/\d+/i,Cn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kn={any:[/^b/i,/^(a|c)/i]},Dn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},En={any:[/1/i,/2/i,/3/i,/4/i]},Wn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ln={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},On={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_n={ordinalNumber:le({matchPattern:Mn,parsePattern:Sn,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:Cn,defaultMatchWidth:"wide",parsePatterns:kn,defaultParseWidth:"any"}),quarter:w({matchPatterns:Dn,defaultMatchWidth:"wide",parsePatterns:En,defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:Wn,defaultMatchWidth:"wide",parsePatterns:Ln,defaultParseWidth:"any"}),day:w({matchPatterns:Nn,defaultMatchWidth:"wide",parsePatterns:On,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:Rn,defaultMatchWidth:"any",parsePatterns:Tn,defaultParseWidth:"any"})},$n={code:"en-US",formatDistance:sn,formatLong:dn,formatRelative:mn,localize:vn,match:_n,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zn(e,a,n){const r=Ee(),o=n?.locale??r.locale??$n,u=2520,l=Y(e,a);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l}),[h,i]=B(n?.in,...l>0?[a,e]:[e,a]),m=rn(i,h),s=(we(i)-we(h))/1e3,d=Math.round((m-s)/60);let f;if(d<2)return n?.includeSeconds?m<5?o.formatDistance("lessThanXSeconds",5,c):m<10?o.formatDistance("lessThanXSeconds",10,c):m<20?o.formatDistance("lessThanXSeconds",20,c):m<40?o.formatDistance("halfAMinute",0,c):m<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):d===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",d,c);if(d<45)return o.formatDistance("xMinutes",d,c);if(d<90)return o.formatDistance("aboutXHours",1,c);if(d<pe){const b=Math.round(d/60);return o.formatDistance("aboutXHours",b,c)}else{if(d<u)return o.formatDistance("xDays",1,c);if(d<U){const b=Math.round(d/pe);return o.formatDistance("xDays",b,c)}else if(d<U*2)return f=Math.round(d/U),o.formatDistance("aboutXMonths",f,c)}if(f=an(i,h),f<12){const b=Math.round(d/U);return o.formatDistance("xMonths",b,c)}else{const b=f%12,M=Math.trunc(f/12);return b<3?o.formatDistance("aboutXYears",M,c):b<9?o.formatDistance("overXYears",M,c):o.formatDistance("almostXYears",M+1,c)}}function An(e,a){return zn(e,Gt(e),a)}function Fn(e,a,n){const[r,o]=B(n?.in,e,a);return+ye(r,n)==+ye(o,n)}const In={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Xn=(e,a,n)=>{let r;const o=In[e];return typeof o=="string"?r=o:a===1?r=o.one:r=o.other.replace("{{count}}",String(a)),n?.addSuffix?n.comparison&&n.comparison>0?r+"内":r+"前":r},Vn={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},Un={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Yn={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},qn={date:D({formats:Vn,defaultWidth:"full"}),time:D({formats:Un,defaultWidth:"full"}),dateTime:D({formats:Yn,defaultWidth:"full"})};function xe(e,a,n){const r="eeee p";return Fn(e,a,n)?r:e.getTime()>a.getTime()?"'下个'"+r:"'上个'"+r}const Bn={lastWeek:xe,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:xe,other:"PP p"},Hn=(e,a,n,r)=>{const o=Bn[e];return typeof o=="function"?o(a,n,r):o},Jn={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Gn={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Qn={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Kn={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Zn={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},ea={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},ta=(e,a)=>{const n=Number(e);switch(a?.unit){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},na={ordinalNumber:ta,era:y({values:Jn,defaultWidth:"wide"}),quarter:y({values:Gn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:y({values:Qn,defaultWidth:"wide"}),day:y({values:Kn,defaultWidth:"wide"}),dayPeriod:y({values:Zn,defaultWidth:"wide",formattingValues:ea,defaultFormattingWidth:"wide"})},aa=/^(第\s*)?\d+(日|时|分|秒)?/i,ra=/\d+/i,oa={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},sa={any:[/^(前)/i,/^(公元)/i]},ia={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ca={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},la={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},ua={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},da={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},ha={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},ma={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},fa={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},ga={ordinalNumber:le({matchPattern:aa,parsePattern:ra,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:oa,defaultMatchWidth:"wide",parsePatterns:sa,defaultParseWidth:"any"}),quarter:w({matchPatterns:ia,defaultMatchWidth:"wide",parsePatterns:ca,defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:la,defaultMatchWidth:"wide",parsePatterns:ua,defaultParseWidth:"any"}),day:w({matchPatterns:da,defaultMatchWidth:"wide",parsePatterns:ha,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:ma,defaultMatchWidth:"any",parsePatterns:fa,defaultParseWidth:"any"})},pa={code:"zh-CN",formatDistance:Xn,formatLong:qn,formatRelative:Hn,localize:na,match:ga,options:{weekStartsOn:1,firstWeekContainsDate:4}},ba={lessThanXSeconds:{one:"少於 1 秒",other:"少於 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分鐘",lessThanXMinutes:{one:"少於 1 分鐘",other:"少於 {{count}} 分鐘"},xMinutes:{one:"1 分鐘",other:"{{count}} 分鐘"},xHours:{one:"1 小時",other:"{{count}} 小時"},aboutXHours:{one:"大約 1 小時",other:"大約 {{count}} 小時"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大約 1 個星期",other:"大約 {{count}} 個星期"},xWeeks:{one:"1 個星期",other:"{{count}} 個星期"},aboutXMonths:{one:"大約 1 個月",other:"大約 {{count}} 個月"},xMonths:{one:"1 個月",other:"{{count}} 個月"},aboutXYears:{one:"大約 1 年",other:"大約 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超過 1 年",other:"超過 {{count}} 年"},almostXYears:{one:"將近 1 年",other:"將近 {{count}} 年"}},ya=(e,a,n)=>{let r;const o=ba[e];return typeof o=="string"?r=o:a===1?r=o.one:r=o.other.replace("{{count}}",String(a)),n?.addSuffix?n.comparison&&n.comparison>0?r+"內":r+"前":r},wa={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},xa={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},va={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},ja={date:D({formats:wa,defaultWidth:"full"}),time:D({formats:xa,defaultWidth:"full"}),dateTime:D({formats:va,defaultWidth:"full"})},Pa={lastWeek:"'上個'eeee p",yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:"'下個'eeee p",other:"P"},Ma=(e,a,n,r)=>Pa[e],Sa={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Ca={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},ka={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Da={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["週日","週一","週二","週三","週四","週五","週六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Ea={narrow:{am:"上",pm:"下",midnight:"午夜",noon:"晌",morning:"早",afternoon:"午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"午夜",noon:"中午",morning:"上午",afternoon:"下午",evening:"晚上",night:"夜晚"},wide:{am:"上午",pm:"下午",midnight:"午夜",noon:"中午",morning:"上午",afternoon:"下午",evening:"晚上",night:"夜晚"}},Wa={narrow:{am:"上",pm:"下",midnight:"午夜",noon:"晌",morning:"早",afternoon:"午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"午夜",noon:"中午",morning:"上午",afternoon:"下午",evening:"晚上",night:"夜晚"},wide:{am:"上午",pm:"下午",midnight:"午夜",noon:"中午",morning:"上午",afternoon:"下午",evening:"晚上",night:"夜晚"}},La=(e,a)=>{const n=Number(e);switch(a?.unit){case"date":return n+"日";case"hour":return n+"時";case"minute":return n+"分";case"second":return n+"秒";default:return"第 "+n}},Na={ordinalNumber:La,era:y({values:Sa,defaultWidth:"wide"}),quarter:y({values:Ca,defaultWidth:"wide",argumentCallback:e=>e-1}),month:y({values:ka,defaultWidth:"wide"}),day:y({values:Da,defaultWidth:"wide"}),dayPeriod:y({values:Ea,defaultWidth:"wide",formattingValues:Wa,defaultFormattingWidth:"wide"})},Oa=/^(第\s*)?\d+(日|時|分|秒)?/i,Ra=/\d+/i,Ta={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},_a={any:[/^(前)/i,/^(公元)/i]},$a={narrow:/^[1234]/i,abbreviated:/^第[一二三四]季/i,wide:/^第[一二三四]季度/i},za={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Aa={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Fa={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Ia={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^週[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Xa={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Va={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨)/i},Ua={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},Ya={ordinalNumber:le({matchPattern:Oa,parsePattern:Ra,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:Ta,defaultMatchWidth:"wide",parsePatterns:_a,defaultParseWidth:"any"}),quarter:w({matchPatterns:$a,defaultMatchWidth:"wide",parsePatterns:za,defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:Aa,defaultMatchWidth:"wide",parsePatterns:Fa,defaultParseWidth:"any"}),day:w({matchPatterns:Ia,defaultMatchWidth:"wide",parsePatterns:Xa,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:Va,defaultMatchWidth:"any",parsePatterns:Ua,defaultParseWidth:"any"})},qa={code:"zh-HK",formatDistance:ya,formatLong:ja,formatRelative:Ma,localize:Na,match:Ya,options:{weekStartsOn:0,firstWeekContainsDate:1}},Ba=()=>{switch(N.getLanguage()){case"zh-Hans":return pa;case"zh-Hant":return qa;default:return}};function Ha(){const{t:e}=P(),a=k(l=>l.ticket),[n,r]=g.useState([]);g.useEffect(()=>{Ht().then(r)},[]);const o=W.getCityEntry(a),u=n.filter(l=>l.title.endsWith(`New palettes of ${o.name.en}`));return a.city==="new"||!u.length?null:t.jsxs(He,{color:"orange",className:V.alert,title:e("Uploaded palettes pending for review")+": "+u.length,icon:t.jsx(Je,{}),children:[t.jsx(x,{classNames:{itemWrapper:V["item-wrapper"],itemLabel:V["item-label"]},withPadding:!0,children:u.map(l=>t.jsxs(x.Item,{children:[t.jsxs(ne,{href:l.html_url,target:"_blank",children:["#",l.number]}),t.jsx(R,{component:"span",className:V.created,children:An(l.created_at,{addSuffix:!0,locale:Ba()})})]},l.number))}),t.jsxs(R,{children:[e("You can now earn points for redeeming subscriptions by reviewing templates uploaded by others.")," ",e("Find more details in")," ",t.jsx(ne,{href:"https://github.com/railmapgen/rmg-palette/wiki/Review-Guidelines",target:"_blank",children:e("Review guidelines")})]})]})}function tr(){const{t:e}=P(),a=I(),{isDataLoading:n}=k(s=>s.app),[r,o]=g.useState(),[u,l]=g.useState(!1),[c,h]=g.useState(!1);g.useEffect(()=>{const s=N.storage.get(q);if(s)try{const d=JSON.parse(s);Object.keys(d.lines).length>0&&Object.values(d.lines)[0].id&&(o(d),l(!0))}catch{Ge.error("<TicketView/>, unable to restore draft ticket",s)}},[]);const i=()=>{N.openApp({appId:"rmg-palette"})},m=()=>{a(De()),N.storage.remove(q),N.event(Mt.RESET_TICKET,{})};return t.jsxs(Qe,{w:{base:"100%",sm:600},style:{alignSelf:"center"},children:[t.jsx(Ke,{visible:n}),t.jsxs(Ze,{direction:"column",px:"xs",style:{overflowY:"auto"},children:[t.jsx(Lt,{}),t.jsx(Nt,{}),t.jsx(Ha,{}),t.jsx(Rt,{})]}),t.jsx(et,{}),t.jsx(tt,{children:t.jsxs(C,{flex:1,gap:"sm",children:[t.jsx(v,{variant:"default",onClick:i,children:e("Go back")}),t.jsx(v,{variant:"default",ml:"auto",onClick:m,children:e("Reset")}),t.jsx(v,{onClick:()=>h(!0),children:e("Submit")})]})}),t.jsx(It,{isOpen:u,onClose:()=>l(!1),incomingState:r}),t.jsx(Ft,{isOpen:c,onClose:()=>h(!1)})]})}export{tr as default};
