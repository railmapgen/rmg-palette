import{j as c,f as m,a1 as x,p as C,a2 as P,a3 as j,i as v,a4 as k}from"./mantine-BKUBcjGe.js";import{l as h,r as l,a as R}from"./react-DXyAvNqt.js";import{a as S,u as E,P as f}from"./index-Bod-0Tca.js";const I=n=>`{ getColor(code:"${n}") { code, rgb { r g b }, hex, cmyk { c m y k } } }`,y=async(n,e)=>"#"+(await(await fetch("https://4n6dg5ccsfct3lzfssu34boemq.appsync-api.us-east-1.amazonaws.com/graphql",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"da2-sa3lsp2tkzhj3c2ysxbdprl73e"},body:JSON.stringify({query:I(n)}),signal:e})).json()).data.getColor.hex;function L(n){const{t:e}=h(),o=S(),{pantoneReady:r}=E(s=>s.app);return l.useEffect(()=>{if(r)return;const s=new AbortController;return y("130 C",s.signal).then(i=>o(f(!!i))).catch(()=>o(f(!1))),()=>{s.abort()}},[]),c.jsx(m,{fs:"italic",size:"xs",...n,children:r===void 0?e("Checking Pantone® service availability..."):r?e("Pantone® service is ready")+" ✅":e("Pantone® service is not available")+" ⚠️"})}function O(n){const{value:e,onChange:o,...r}=n,{t:s}=h(),[i,a]=l.useState(e),[p,d]=l.useState(!1),u=l.useRef(new AbortController);l.useEffect(()=>()=>{var t;(t=u.current)==null||t.abort()},[]),l.useEffect(()=>{a(e)},[e]);const b=x(async t=>{u.current.abort(),u.current=new AbortController,d(!0);try{const w=await y(t,u.current.signal);o(t,w),a(t)}catch{console.warn(`[rmg-palette] Unable to find Pantone colour ${t}`),R.flushSync(()=>{a(t)}),a(e)}finally{d(!1)}},1500),g=({target:{value:t}})=>{a(t),b(t)};return c.jsx(C,{label:s("Pantone® code"),value:i,onChange:g,rightSection:p&&c.jsx(P,{size:20}),disabled:p,...r})}const z="_wrapper_1g8bw_1",T={wrapper:z};function _({type:n,size:e,onChange:o,style:r,...s}){const i=l.useRef(null);return c.jsxs("div",{className:T.wrapper,children:[c.jsx(j,{type:n,size:e,onChange:o,style:r,withPicker:!!window.EyeDropper,rightSection:window.EyeDropper?void 0:c.jsx(v,{variant:"subtle",color:"gray",onClick:()=>{var a,p;(a=i.current)==null||a.click(),(p=i.current)==null||p.focus()},children:c.jsx(k,{})}),...s}),c.jsx("input",{ref:i,type:"color",onChange:({currentTarget:{value:a}})=>o==null?void 0:o(a.toUpperCase()),...s})]})}export{_ as C,O as P,L as a};
