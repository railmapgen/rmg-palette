import{j as e,e as E,N as A,B as L,r as x,C as b,f as l,G as T,F as g,g as C,S as w,A as h,h as I,i as S,M,k as H,L as v,m as k}from"./mantine-CrXTPvn8.js";import{l as j,j as B,r as D}from"./react-ZLv5tWbY.js";import{u as f,s as G,E as P,M as O}from"./index-CwBgZi1W.js";import{u as y}from"./use-translated-name-CiDU2zOs.js";import{u as z}from"./use-palette-CWNS_gMV.js";import{c as p}from"./palette-card.module-BXpITapC.js";function F(){const{t:s,i18n:o}=j(),{translateName:n}=y(),r=B(),{countryList:i,selectedCountry:c}=f(t=>t.app),d=[{label:s("Please select..."),value:"",disabled:!0},...i.filter(t=>t.id!=="UN").map(t=>[t.id,n(t.name)]).sort((t,m)=>t[1].localeCompare(m[1],o.languages[0])).map(([t,m])=>({label:m,value:t}))],u=()=>{x.openApp({appId:"rmg-palette-upload"}),x.event(P.ADD_CITY,{})};return e.jsxs(E,{children:[e.jsx(A,{label:s("Country/Region"),value:c,onChange:({currentTarget:{value:t}})=>r(G(t)),data:d}),e.jsx(L,{variant:"filled",ml:"auto",onClick:u,children:s("Add a city")})]})}const U="_root_180oh_1",V="_control_180oh_8",N={root:U,control:V,"official-names":"_official-names_180oh_15"},Y=s=>{const[,o,n,r]=s.match(/^#(\w{2})(\w{2})(\w{2})$/)??[];return[+("0x"+o),+("0x"+n),+("0x"+r)]};function $({line:s}){const{t:o}=j(),{translateName:n,otherOfficialNames:r}=y(),{countryList:i,selectedCountry:c}=f(t=>t.app),d=i.find(({id:t})=>t===c),u=s.fg===O.black?"black":"white";return e.jsxs(b,{className:p.card,withBorder:!0,children:[e.jsxs(b.Section,{bg:s.colour,className:p["card-section"],style:{color:u},children:[e.jsx(l,{span:!0,children:n(s.name)}),e.jsx(l,{span:!0,children:r(s.name,d?.languages)})]}),e.jsxs(T,{gap:"xs",mt:"sm",children:[e.jsxs(g,{className:p.output,children:[e.jsx(l,{c:"dimmed",size:"sm",span:!0,children:o("HEX")}),e.jsx(C,{children:s.colour.toUpperCase()})]}),e.jsxs(g,{className:p.output,children:[e.jsx(l,{c:"dimmed",size:"sm",span:!0,children:o("RGB")}),e.jsx(C,{children:Y(s.colour).join(", ")})]}),s.pantone&&e.jsxs(g,{className:p.output,children:[e.jsx(l,{c:"dimmed",size:"sm",span:!0,children:o("PantoneÂ® code")}),e.jsx(C,{children:s.pantone})]})]})]},s.id)}function X({cityCode:s}){const o=z(s);return e.jsx(w,{cols:{base:1,xs:2,sm:3,md:4,lg:5,xl:6},children:o.map(n=>e.jsx($,{line:n},n.id))})}function q(){const{t:s}=j(),{translateName:o,otherOfficialNames:n}=y(),{cityList:r,countryList:i,selectedCountry:c}=f(a=>a.app),d=i.find(({id:a})=>a===c),u=r.filter(a=>a.country===c),t=D.useRef({}),m=a=>{a&&setTimeout(()=>{t.current[a]?.scrollIntoView({behavior:"smooth"})},200)},R=async a=>{x.closeApp("rmg-palette-upload"),setTimeout(()=>{x.openApp({appId:"rmg-palette-upload",hash:"/new?city="+a})},200),x.event(P.EDIT_CITY,{city:a})};return e.jsx(h,{chevronPosition:"left",classNames:{root:N.root},onChange:m,children:u.map(a=>(t.current={},e.jsxs(h.Item,{ref:_=>{t.current[a.id]=_},value:a.id,children:[e.jsxs(I,{className:N.control,children:[e.jsxs(h.Control,{children:[o(a.name),e.jsx(l,{span:!0,className:N["official-names"],children:n(a.name,d?.languages)})]}),e.jsx(S,{variant:"default",ml:"xs",mr:"md","aria-label":s("Edit"),title:s("Edit"),onClick:()=>R(a.id),children:e.jsx(M,{})})]}),e.jsx(h.Panel,{children:e.jsx(X,{cityCode:a.id})})]},a.id)))})}function se(){const{t:s}=j(),{isDataLoading:o,selectedCountry:n}=f(r=>r.app);return e.jsxs(H,{children:[e.jsx(v,{visible:o}),e.jsx(F,{}),e.jsxs(k,{children:[e.jsx(v,{visible:!n,loaderProps:{children:s("Select a country or region to begin.")}}),e.jsx(q,{})]})]})}export{se as default};
