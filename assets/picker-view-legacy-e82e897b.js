!function(){function n(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,a,i,u=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(u.push(r.value),u.length!==e);l=!0);}catch(s){c=!0,o=s}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(n,e)||t(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n){return function(n){if(Array.isArray(n))return r(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,e){if(n){if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,e):void 0}}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}System.register(["./chakra-legacy-1ad193d5.js","./index-legacy-d81ccdb4.js","./react-legacy-2ad49228.js","./use-palette-legacy-e18e4f4e.js","./index.esm-legacy-f5be2b81.js"],(function(t,r){"use strict";var o,a,i,u,l,c,s,f,d,m,p,v,g,h,y,j,x,C,b,S,A,E,I,w,L,P;return{setters:[function(n){o=n.j,a=n.a0,i=n._,u=n.a6,l=n.a7,c=n.H,s=n.a8,f=n.$,d=n.f},function(n){m=n.a,p=n.U,v=n.M,g=n.b,h=n.z,y=n.c,j=n.r,x=n.E,C=n.d,b=n.e,S=n.V},function(n){A=n.u,E=n.r,I=n.o},function(n){w=n.u},function(n){L=n.R,P=n.i}],execute:function(){t("default",(function(){var e=n(I(),1)[0],t=e.get("parentId"),r=e.get("parentComponent"),a=y(),i=m((function(n){return n.app})).isDataLoading,u=n(E.useState(),2),l=u[0],c=u[1],s=n(E.useState(),2),f=s[0],d=s[1],p=E.useRef();E.useEffect((function(){var n=new BroadcastChannel(D+t);return p.current=n,j.event(x.APP_CLIP_VIEW_OPENED,{parentComponent:r}),n.onmessage=function(e){var t=e.data,r=t.event,o=t.data;console.log("[".concat(n.name,"] Received event from parent component:"),r),"OPEN"===r&&(c(crypto.randomUUID()),d(o))},console.log("[".concat(n.name,"] App clip connection established, parentComponent=").concat(r)),n.postMessage({event:"LOADED"}),function(){n.close()}}),[]);return o.jsxs(C,{children:[i&&o.jsx(b,{isIndeterminate:!0}),o.jsx(z,{defaultTheme:f,sessionId:l,onSubmit:function(n,e){var t,o;console.log("[".concat(null===(t=p.current)||void 0===t?void 0:t.name,"] Emitting SELECT event, theme:"),n),null===(o=p.current)||void 0===o||o.postMessage({event:"SELECT",data:n}),a(S({theme:n,displayName:e})),j.event(x.APP_CLIP_VIEW_SELECT,{parentComponent:r,theme:n})},onClose:function(){var n,e;console.log("[".concat(null===(n=p.current)||void 0===n?void 0:n.name,"] Emitting CLOSE event")),null===(e=p.current)||void 0===e||e.postMessage({event:"CLOSE"}),j.event(x.APP_CLIP_VIEW_CLOSED,{parentComponent:r})}})]})}));var r=function(n){var t=function(n){var t=n.toUpperCase().split("");return 2===t.length?t.map((function(n){return((n.codePointAt(0)||0)+127397).toString(16).toUpperCase()})):5===t.length?["1F3F4"].concat(e(t.map((function(n){return((n.codePointAt(0)||0)+917536).toString(16).toUpperCase()}))),["E007F"]):[]}(n);return String.fromCodePoint.apply(String,e(t.map((function(n){return parseInt(n,16)}))))};function V(n){var e=n.defaultValueId,t=n.onChange,a=A().i18n,i=m((function(n){return n.app})).cityList,u=e?i.find((function(n){return n.id===e})):void 0,l=function(n){var e,t;return null!==(e=null!==(t=a.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})))&&void 0!==t?t:n.name.en)&&void 0!==e?e:""},c=i.slice().sort((function(n,e){return"other"===n.id?1:"other"===e.id?-1:l(n).localeCompare(l(e),a.languages[0])}));return o.jsx(p,{data:c,displayValue:l,displayHandler:function(n){var e="TW"===n.country&&["zh-Hans","zh-CN"].includes(a.languages[0]),t=a.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n}));return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"flag-emoji",children:e?"ðŸ´":r(n.country)}),o.jsx("span",{children:t})]})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.toLowerCase().includes(e.toLowerCase())}))},defaultValue:u,onChange:function(n){return null==t?void 0:t(n.id)}})}function O(n){var e=n.city,t=n.defaultValueId,r=n.onChange,a=A().i18n,i=w(e),u=t?i.find((function(n){return n.id===t})):void 0,l=function(n){var e;return null!==(e=a.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})))&&void 0!==e?e:""};return o.jsx(p,{data:i,displayValue:l,displayHandler:function(n){var e=l(n);return o.jsx(g,{name:e,fg:n.fg||v.white,bg:n.colour})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.includes(e)}))},defaultValue:u,onChange:function(n){return null==r?void 0:r(n.id,n.colour,n.fg||v.white)}})}var k=function(n){return!!n.match(/^#[0-9a-fA-F]{6}$/)},_={flex:1,mx:2,"& .chakra-badge":{fontSize:"1em"},"& > .chakra-stack":{w:"100%",p:2,"& > div":{w:"100%"}},"& h5":{alignSelf:"flex-start"}};function z(e){var t=e.defaultTheme,r=e.sessionId,p=e.onSubmit,y=e.onClose,j=A().t,x=m((function(n){return n.app})).recentlyUsed,C=n(E.useState(null==t?void 0:t[0]),2),b=C[0],S=C[1],I=n(E.useState(null==t?void 0:t[1]),2),w=I[0],z=I[1],D=n(E.useState((null==t?void 0:t[2])||"#AAAAAA"),2),F=D[0],T=D[1],U=n(E.useState((null==t?void 0:t[3])||v.white),2),N=U[0],M=U[1],W=n(E.useState("color"),2),H=W[0],R=W[1];E.useEffect((function(){r&&t&&(S(t[0]),z(t[1]),T(t[2]),M(t[3]))}),[r,null==t?void 0:t.toString()]);var B=[{label:j("Select"),value:"color"},{label:j("Key in"),value:"text"}],$=[{label:j("Black"),value:v.black},{label:j("White"),value:v.white}],K=[{type:"custom",label:j("City"),component:o.jsx(V,{defaultValueId:b,onChange:function(n){S(n),z(void 0),T("#AAAAAA"),M(v.white)}})},{type:"custom",label:j("Line"),component:o.jsx(O,{city:b,defaultValueId:w,onChange:function(n,e,t){z(n),T(e),M(t)}})}],q=[{type:"custom",label:j("Input mode"),component:o.jsx(h,{selections:B,defaultValue:H,onChange:function(n){return R(n)}})},{type:"input",label:j("Background colour"),variant:H,value:F,placeholder:"#F3D03E",validator:k,onChange:function(n){S("other"),z("other"),T(n)}},{type:"custom",label:j("Foreground colour"),component:o.jsx(h,{selections:$,defaultValue:N,onChange:function(n){S("other"),z("other"),M(n)}})}],G=b&&w&&F&&N&&k(F);return o.jsxs(o.Fragment,{children:[o.jsxs(a,{sx:_,children:[o.jsx(g,{name:j("Example"),fg:N,bg:F}),o.jsxs(a,{children:[o.jsx(L,{fields:K}),o.jsx(L,{fields:q})]}),o.jsxs(a,{children:[o.jsx(i,{as:"h5",size:"xs",children:j("Recently used")}),o.jsx(u,{children:x.map((function(n){var e=n.theme,t=n.displayName;return o.jsx(l,{children:o.jsx(c,{size:"xs","aria-label":j("Apply"),title:t,mt:"0.45px",color:e[3],bg:e[2],icon:o.jsx(P,{}),onClick:function(){return function(n){S(n[0]),z(n[1]),T(n[2]),M(n[3])}(e)}})},e.join("-"))}))})]})]}),o.jsx(s,{}),o.jsxs(f,{p:2,justifyContent:"flex-end",children:[o.jsx(d,{size:"sm",onClick:y,children:j("Cancel")}),o.jsx(d,{size:"sm",colorScheme:"primary",onClick:function(){if(G){var n="".concat(b," - ").concat(w);null==p||p([b,w,F,N],n)}},isDisabled:!G,children:j("Confirm")})]})]})}var D="rmg-palette-bridge--"}}}))}();
