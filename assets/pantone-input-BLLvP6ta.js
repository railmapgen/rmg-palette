import{j as u,T as C,y as x,p as P,z as j}from"./mantine-BanmS24x.js";import{l as y,r as s,a as v}from"./react-BFtFWddK.js";import{f as w,u as R,a9 as h}from"./index-Wltgqzmt.js";const S=a=>'{ getColor(code:"'.concat(a,'") { code, rgb { r g b }, hex, cmyk { c m y k } } }'),g=async(a,t)=>"#"+(await(await fetch("https://4n6dg5ccsfct3lzfssu34boemq.appsync-api.us-east-1.amazonaws.com/graphql",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"da2-sa3lsp2tkzhj3c2ysxbdprl73e"},body:JSON.stringify({query:S(a)}),signal:t})).json()).data.getColor.hex;function T(a){const{t}=y(),r=w(),{pantoneReady:n}=R(o=>o.app);return s.useEffect(()=>{if(n)return;const o=new AbortController;return g("130 C",o.signal).then(l=>r(h(!!l))).catch(()=>r(h(!1))),()=>{o.abort()}},[]),u.jsx(C,{fs:"italic",size:"xs",...a,children:n===void 0?t("Checking Pantone® service availability..."):n?t("Pantone® service is ready")+" ✅":t("Pantone® service is not available")+" ⚠️"})}function I(a){const{value:t,onChange:r,...n}=a,{t:o}=y(),[l,c]=s.useState(t),[p,d]=s.useState(!1),i=s.useRef(new AbortController);s.useEffect(()=>()=>{var e;(e=i.current)==null||e.abort()},[]),s.useEffect(()=>{c(t)},[t]);const b=x(async e=>{i.current.abort(),i.current=new AbortController,d(!0);try{const f=await g(e,i.current.signal);r(e,f),c(e)}catch(f){console.warn("[rmg-palette] Unable to find Pantone colour ".concat(e)),v.flushSync(()=>{c(e)}),c(t)}finally{d(!1)}},1500),m=({target:{value:e}})=>{c(e),b(e)};return u.jsx(P,{label:o("Pantone® code"),value:l,onChange:m,rightSection:p&&u.jsx(j,{size:20}),disabled:p,...n})}export{I as P,T as a};
