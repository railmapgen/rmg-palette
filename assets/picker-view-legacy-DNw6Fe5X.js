System.register(["./mantine-legacy-Bk4Jn8Fz.js","./react-legacy-3C4zREH5.js","./index-legacy-B3pCB6Bg.js","./use-translated-name-legacy-DAwon0wS.js","./use-palette-legacy-5SyiBoe4.js","./pantone-input-legacy-DxWydbIK.js"],(function(e,n){"use strict";var t,a,o,s,l,r,i,c,u,d,p,m,h,g,j,C,x,v,f,b,y,L,E,w,_,S,A,I,P,O,k,D,$,z,N,R,T;return{setters:[e=>{t=e.j,a=e.o,o=e._,s=e.u,l=e.v,r=e.T,i=e.G,c=e.B,u=e.$,d=e.a0,p=e.a1,m=e.r,h=e.m,g=e.w,j=e.F,C=e.I,x=e.E,v=e.p,f=e.Y,b=e.Z,y=e.k,L=e.L},e=>{E=e.l,w=e.r,_=e.o},e=>{S=e.u,A=e.H,I=e.M,P=e.a,O=e.J,k=e.E,D=e.K,$=e.N},e=>{z=e.u},e=>{N=e.u},e=>{R=e.a,T=e.P}],execute:function(){var n=document.createElement("style");n.textContent="._body_jalou_1{padding:calc(.5rem * var(--mantine-scale));align-items:center;width:100%;overflow-y:auto}._custom-input-group_jalou_8{flex-wrap:wrap}._custom-input-group_jalou_8>div{flex:1;min-width:calc(8.125rem * var(--mantine-scale))}\n/*$vite$:1*/",document.head.appendChild(n),e("default",(function(){const[e]=_(),n=e.get("parentId"),a=e.get("parentComponent"),o=P(),{isDataLoading:s}=S((e=>e.app)),[l,r]=w.useState(),[i,c]=w.useState(),u=w.useRef(null);return w.useEffect((()=>{const e=new BroadcastChannel(Y+n);return u.current=e,m.event(k.APP_CLIP_VIEW_OPENED,{parentComponent:a}),e.onmessage=n=>{const{event:t,data:a}=n.data;console.log(`[${e.name}] Received event from parent component:`,t),"OPEN"===t&&(r(crypto.randomUUID()),c(a))},console.log(`[${e.name}] App clip connection established, parentComponent=${a}`),e.postMessage({event:"LOADED"}),()=>{e.close()}}),[]),t.jsxs(y,{children:[t.jsx(L,{visible:s}),t.jsx(H,{defaultTheme:i,sessionId:l,onSubmit:(e,n)=>{console.log(`[${u.current?.name}] Emitting SELECT event, theme:`,e),u.current?.postMessage({event:"SELECT",data:e}),o($({theme:e,displayName:n})),m.event(k.APP_CLIP_VIEW_SELECT,{parentComponent:a,theme:e})},onClose:()=>{console.log(`[${u.current?.name}] Emitting CLOSE event`),u.current?.postMessage({event:"CLOSE"}),m.event(k.APP_CLIP_VIEW_CLOSED,{parentComponent:a})}})]})}));const F={body:"_body_jalou_1","custom-input-group":"_custom-input-group_jalou_8"},V=e=>{const n=(e=>{const n=e.toUpperCase().split("");return 2===n.length?n.map((e=>((e.codePointAt(0)||0)+127397).toString(16).toUpperCase())):5===n.length?["1F3F4",...n.map((e=>((e.codePointAt(0)||0)+917536).toString(16).toUpperCase())),"E007F"]:[]})(e);return String.fromCodePoint(...n.map((e=>parseInt(e,16))))};function B(e){const{defaultValueId:n,onChange:o}=e,{t:s,i18n:l}=E(),{translateName:r}=z(),{countryList:i,cityList:c}=S((e=>e.app)),u=c.reduce(((e,n)=>({...e,[n.id]:n})),{}),d=i.reduce(((e,n)=>({...e,[n.id]:n})),{}),p=n&&n in u?n:null,m=c.map((e=>({value:e.id,label:r(e.name)}))).sort(((e,n)=>"other"===e.value?1:"other"===n.value?-1:e.label.localeCompare(n.label,l.languages[0])));return t.jsx(a,{label:s("City"),data:m,value:p,onChange:e=>e&&o?.(e),renderOption:({option:e})=>{const n=u[e.value];return n&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flag-emoji",children:V(A(n.country))}),t.jsx("span",{children:r(n.name)})]})},searchable:!0,filter:({options:e,search:n})=>{const t=n.toLocaleLowerCase();return e.filter((e=>{const n=u[e.value];return n&&(n.id.toLocaleLowerCase().includes(t)||Object.values(n.name).some((e=>e.toLocaleLowerCase().includes(t)))||n.country.toLocaleLowerCase().includes(t)||Object.values(d[n.country]?.name??{}).some((e=>e.toLocaleLowerCase().includes(t))))}))}})}function M(e){const{city:n,defaultValueId:s,onChange:l,onSubmit:r}=e,{t:i}=E(),{translateName:c}=z(),[u,d]=w.useState(!1),p=N(n),m=p.reduce(((e,n)=>({...e,[n.id]:n})),{}),h=s&&s in m?s:null,g=p.map((e=>({value:e.id,label:c(e.name)})));return t.jsx(a,{label:i("Line"),data:g,value:h,onChange:e=>{if(e){const n=m[e];l?.(n.id,n.colour,n.fg||I.white,n.pantone)}},renderOption:({option:e})=>{const n=m[e.value];return n&&t.jsx(o,{size:"lg",radius:"sm",color:n.colour,style:{color:n.fg||I.white},children:c(n.name)})},searchable:!0,filter:({options:e,search:n})=>{const t=n.toLocaleLowerCase();return e.filter((e=>{const n=m[e.value];return n&&(n.id.toLocaleLowerCase().includes(t)||Object.values(n.name).some((e=>e.toLocaleLowerCase().includes(t))))}))},onDropdownOpen:()=>d(!0),onDropdownClose:()=>d(!1),onKeyDown:({key:e})=>!u&&"Enter"===e&&r?.(),disabled:!n})}function U({onApply:e}){const{t:n}=E(),a=P(),{recentlyUsed:o}=S((e=>e.app)),[h,g]=w.useState(!1),j=n(h?"Remove":"Apply");return t.jsxs(s,{w:"100%",children:[t.jsxs(l,{children:[t.jsx(r,{order:2,size:"h4",children:n("Recently used")}),t.jsx(i,{gap:"xs",ml:"auto",children:h?t.jsxs(t.Fragment,{children:[t.jsx(c,{variant:"default",size:"xs",onClick:()=>{a(D()),m.event(k.CLEAR_HISTORY,{})},children:n("Clear all")}),t.jsx(c,{size:"xs",onClick:()=>g(!1),children:n("Done")})]}):t.jsx(c,{variant:"default",size:"xs",onClick:()=>g(!0),children:n("Clear")})})]}),t.jsx(u,{children:t.jsx(i,{gap:"xs",p:"xs",children:o.map((({theme:n,displayName:o},s)=>t.jsx(d,{bg:n[2],fg:n[3],"aria-label":j+" "+o,title:j+" "+o,onClick:()=>h?(a(O(s)),void m.event(k.REMOVE_HISTORY_ITEM,{})):e(n),children:h?t.jsx(p,{}):"Aa"},n.join("-"))))})})]})}const W=e=>!!e.match(/^#[0-9a-fA-F]{6}$/);function H(e){const{defaultTheme:n,sessionId:a,onSubmit:s,onClose:l}=e,{t:r}=E(),{pantoneReady:u}=S((e=>e.app)),[d,p]=w.useState(n?.[0]),[m,y]=w.useState(n?.[1]),[L,_]=w.useState(n?.[2]||"#AAAAAA"),[A,P]=w.useState(n?.[3]||I.white),[O,k]=w.useState(""),[D,$]=w.useState("rgb"),z=()=>{k(""),$((e=>"pantone"===e?"rgb":e))};w.useEffect((()=>{a&&n&&(p(n[0]),y(n[1]),_(n[2]),P(n[3]),z())}),[a,n?.toString()]);const N=[{label:r("RGB"),value:"rgb"},{label:r("PantoneÂ®"),value:"pantone",disabled:!u}],V=[{label:r("Black"),value:I.black},{label:r("White"),value:I.white}],H=d&&m&&L&&A&&W(L),Y=()=>{if(H){const e=`${d} - ${m}`,n=L.toLowerCase();s?.([d,m,n,A],e)}};return t.jsxs(t.Fragment,{children:[t.jsx(h,{children:t.jsxs(g,{className:F.body,children:[t.jsx(j,{children:t.jsx(o,{size:"xl",radius:"sm",color:L,style:{color:A},children:r("Example")})}),t.jsxs(i,{w:"100%",grow:!0,children:[t.jsx(B,{defaultValueId:d,onChange:e=>{p(e),y(void 0),_("#AAAAAA"),P(I.white)}}),t.jsx(M,{city:d,defaultValueId:m,onChange:(e,n,t,a)=>{y(e),_(n),P(t),a&&k(a)},onSubmit:Y})]}),t.jsx(R,{display:"none"}),t.jsxs(i,{w:"100%",className:F["custom-input-group"],children:[t.jsx(C,{size:"sm",label:r("Input mode"),data:N,value:D,onChange:e=>$(e)}),"pantone"===D&&t.jsx(T,{value:O,onChange:(e,n)=>{p("other"),y("other"),_(n),k(e)}}),"pantone"!==D&&(window.EyeDropper?t.jsx(x,{label:r("Background colour"),value:L,onChange:e=>{p("other"),y("other"),_(e),z()}}):t.jsx(v,{type:"color",label:r("Background colour"),value:L,onChange:({currentTarget:{value:e}})=>{p("other"),y("other"),_(e),z()}})),t.jsx(C,{size:"sm",label:r("Foreground colour"),data:V,value:A,onChange:e=>{p("other"),y("other"),P(e)}})]}),t.jsx(U,{onApply:e=>{p(e[0]),y(e[1]),_(e[2]),P(e[3]),z()}})]})}),t.jsx(f,{}),t.jsx(b,{children:t.jsxs(i,{ml:"auto",gap:"sm",children:[t.jsx(c,{variant:"default",size:"sm",onClick:l,children:r("Cancel")}),t.jsx(c,{variant:"filled",size:"sm",onClick:Y,disabled:!H,children:r("Confirm")})]})})]})}const Y="rmg-palette-bridge--"}}}));
