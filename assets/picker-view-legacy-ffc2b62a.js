!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,u,l=[],i=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);i=!0);}catch(s){c=!0,o=s}finally{try{if(!i&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./chakra-legacy-f691ee8c.js","./index-legacy-3f7ba0bf.js","./react-legacy-2ad49228.js","./use-palette-legacy-a7b03cf9.js","./rmg-fields-legacy-8ff07220.js"],(function(n,t){"use strict";var r,o,a,u,l,i,c,s,d,f,m,v,g,p,h,y,j,C,x,b;return{setters:[function(e){r=e.j,o=e.a5,a=e.a6,u=e.a7,l=e._,i=e.f},function(e){c=e.e,s=e.U,d=e.c,f=e.M,m=e.b,v=e.z,g=e.r,p=e.E,h=e.f},function(e){y=e.u,j=e.r,C=e.o},function(e){x=e.u},function(e){b=e.R}],execute:function(){function t(e){var n=e.countryCode,t=e.svgFilename;return t?r.jsx(o,{src:"/rmg-palette/resources/flags/".concat(t.slice(0,-4),".svg"),alt:"Flag of ".concat(n),h:17,mr:1}):r.jsx(r.Fragment,{})}function E(e){var n=e.defaultValueId,o=e.onChange,a=y().i18n,u=n?c.find((function(e){return e.id===n})):void 0,l=function(e){var n,t;return null!==(n=null!==(t=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==t?t:e.name.en)&&void 0!==n?n:""},i=c.slice().sort((function(e,n){return"other"===e.id?1:"other"===n.id?-1:l(e).localeCompare(l(n),a.languages[0])}));return r.jsx(s,{data:i,displayValue:l,displayHandler:function(e){var n,o,u="TW"===e.country&&["zh-Hans","zh-CN"].includes(a.languages[0]),l=["Win32","Win64"].includes(navigator.platform),i=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})),c=null===(n=d.find((function(n){return n.id===e.country})))||void 0===n?void 0:n.flagSvg,s=null===(o=d.find((function(n){return n.id===e.country})))||void 0===o?void 0:o.flagEmoji;return r.jsxs(r.Fragment,{children:[u?r.jsx("span",{children:"ðŸ´Â "}):l?r.jsx(t,{countryCode:e.country,svgFilename:c}):r.jsxs("span",{children:[s,"Â "]}),i]})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.includes(n)}))},defaultValue:u,onChange:function(e){return null==o?void 0:o(e.id)}})}function S(e){var n=e.city,t=e.defaultValueId,o=e.onChange,a=y().i18n,u=x(n),l=t?u.find((function(e){return e.id===t})):void 0,i=function(e){var n;return null!==(n=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==n?n:""};return r.jsx(s,{data:u,displayValue:i,displayHandler:function(e){var n=i(e);return r.jsx(m,{name:n,fg:e.fg||f.white,bg:e.colour})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.includes(n)}))},defaultValue:l,onChange:function(e){return null==o?void 0:o(e.id,e.colour,e.fg||f.white)}})}n("default",(function(){var n=e(C(),1)[0],t=n.get("parentId"),o=n.get("parentComponent"),a=e(j.useState(),2),u=a[0],l=a[1],i=e(j.useState(),2),c=i[0],s=i[1],d=j.useRef();j.useEffect((function(){var e=new BroadcastChannel(V+t);d.current=e,g.event(p.APP_CLIP_VIEW_OPENED,{parentComponent:o}),e.onmessage=function(n){var t=n.data,r=t.event,o=t.data;console.log("[".concat(e.name,"] Received event from parent component:"),r),"OPEN"===r&&(l(crypto.randomUUID()),s(o))},console.log("[".concat(e.name,"] App clip connection established, parentComponent=").concat(o));var n=document.createElement("style");return n.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(n),e.postMessage({event:"LOADED"}),function(){e.close(),document.head.removeChild(n)}}),[]);return r.jsx(h,{children:r.jsx(w,{defaultTheme:c,sessionId:u,onSubmit:function(e){var n,t;console.log("[".concat(null===(n=d.current)||void 0===n?void 0:n.name,"] Emitting SELECT event, theme:"),e),null===(t=d.current)||void 0===t||t.postMessage({event:"SELECT",data:e}),g.event(p.APP_CLIP_VIEW_SELECT,{parentComponent:o,theme:e})},onClose:function(){var e,n;console.log("[".concat(null===(e=d.current)||void 0===e?void 0:e.name,"] Emitting CLOSE event")),null===(n=d.current)||void 0===n||n.postMessage({event:"CLOSE"}),g.event(p.APP_CLIP_VIEW_CLOSED,{parentComponent:o})}})})}));var A=function(e){return!!e.match(/^#[0-9a-fA-F]{6}$/)},I={flex:1,mx:2,"& .chakra-badge":{fontSize:"1em"},"& > .chakra-stack":{w:"100%",p:2,"& > div":{w:"100%"}}};function w(n){var t=n.defaultTheme,o=n.sessionId,c=n.onSubmit,s=n.onClose,d=y().t,g=e(j.useState(null==t?void 0:t[0]),2),p=g[0],h=g[1],C=e(j.useState(null==t?void 0:t[1]),2),x=C[0],w=C[1],V=e(j.useState((null==t?void 0:t[2])||"#AAAAAA"),2),O=V[0],_=V[1],L=e(j.useState((null==t?void 0:t[3])||f.white),2),P=L[0],k=L[1],F=e(j.useState("color"),2),D=F[0],T=F[1];j.useEffect((function(){o&&t&&(h(t[0]),w(t[1]),_(t[2]),k(t[3]))}),[o,null==t?void 0:t.toString()]);var W=[{label:d("Select"),value:"color"},{label:d("Key in"),value:"text"}],z=[{label:d("Black"),value:f.black},{label:d("White"),value:f.white}],M=[{type:"custom",label:d("City"),component:r.jsx(E,{defaultValueId:p,onChange:function(e){h(e),w(void 0),_("#AAAAAA"),k(f.white)}})},{type:"custom",label:d("Line"),component:r.jsx(S,{city:p,defaultValueId:x,onChange:function(e,n,t){w(e),_(n),k(t)}})}],U=[{type:"custom",label:d("Input mode"),component:r.jsx(v,{selections:W,defaultValue:D,onChange:function(e){return T(e)}})},{type:"input",label:d("Background colour"),variant:D,value:O,placeholder:"#F3D03E",validator:A,onChange:function(e){h("other"),w("other"),_(e)}},{type:"custom",label:d("Foreground colour"),component:r.jsx(v,{selections:z,defaultValue:P,onChange:function(e){h("other"),w("other"),k(e)}})}],B=p&&x&&O&&P&&A(O);return r.jsxs(r.Fragment,{children:[r.jsxs(a,{sx:I,children:[r.jsx(m,{name:d("Example"),fg:P,bg:O}),r.jsxs(a,{children:[r.jsx(b,{fields:M}),r.jsx(b,{fields:U})]})]}),r.jsx(u,{}),r.jsxs(l,{p:2,justifyContent:"flex-end",children:[r.jsx(i,{size:"sm",onClick:s,children:d("Cancel")}),r.jsx(i,{size:"sm",colorScheme:"primary",onClick:function(){B&&(null==c||c([p,x,O,P]))},isDisabled:!B,children:d("Confirm")})]})]})}var V="rmg-palette-bridge--"}}}))}();
